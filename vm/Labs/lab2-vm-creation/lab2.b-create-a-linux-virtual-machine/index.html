
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This lab will walk you through creating a Linux based Virtual Machine on the Azure Portal.">
      
      
      
        <link rel="canonical" href="https://microsoft.github.io/Mastering-the-Marketplace/vm/Labs/lab2-vm-creation/lab2.b-create-a-linux-virtual-machine/">
      
      <link rel="icon" href="../../../../favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Lab 2.b - Create a Linux Virtual Machine - Mastering the Marketplace</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="#0078d4" data-md-color-accent="light-blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upload-post-deployment-script" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://azure.microsoft.com/" title="Mastering the Marketplace" class="md-header__button md-logo" aria-label="Mastering the Marketplace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mastering the Marketplace
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 2.b - Create a Linux Virtual Machine
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/Mastering-the-Marketplace" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/Mastering-the-Marketplace
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="/Mastering-the-Marketplace/saas/" class="md-tabs__link">
      Build Custom SaaS Offers
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="/Mastering-the-Marketplace/saas-accelerator/" class="md-tabs__link">
      The SaaS Accelerator
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="/Mastering-the-Marketplace/vm/" class="md-tabs__link">
      Virtual Machine Offers
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="/Mastering-the-Marketplace/ama/" class="md-tabs__link">
      Azure Managed Application Offers
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="/Mastering-the-Marketplace/partner-center" class="md-tabs__link">
      Mastering Partner Center
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://azure.microsoft.com/" title="Mastering the Marketplace" class="md-nav__button md-logo" aria-label="Mastering the Marketplace" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"/></svg>

    </a>
    Mastering the Marketplace
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/Mastering-the-Marketplace" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    microsoft/Mastering-the-Marketplace
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/saas/" class="md-nav__link">
        Build Custom SaaS Offers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/saas-accelerator/" class="md-nav__link">
        The SaaS Accelerator
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/vm/" class="md-nav__link">
        Virtual Machine Offers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/ama/" class="md-nav__link">
        Azure Managed Application Offers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/Mastering-the-Marketplace/partner-center" class="md-nav__link">
        Mastering Partner Center
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#upload-post-deployment-script" class="md-nav__link">
    Upload Post Deployment Script
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-virtual-machine" class="md-nav__link">
    Create a Virtual Machine
  </a>
  
    <nav class="md-nav" aria-label="Create a Virtual Machine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basics" class="md-nav__link">
    Basics
  </a>
  
    <nav class="md-nav" aria-label="Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#project-details" class="md-nav__link">
    Project Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instance-details" class="md-nav__link">
    Instance Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#administrator-account" class="md-nav__link">
    Administrator Account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbound-port-rules" class="md-nav__link">
    Inbound Port Rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disks" class="md-nav__link">
    Disks
  </a>
  
    <nav class="md-nav" aria-label="Disks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disk-options" class="md-nav__link">
    Disk Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#networking" class="md-nav__link">
    Networking
  </a>
  
    <nav class="md-nav" aria-label="Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#network-interface" class="md-nav__link">
    Network interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management" class="md-nav__link">
    Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    Advanced
  </a>
  
    <nav class="md-nav" aria-label="Advanced">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-using-cloud-init" class="md-nav__link">
    OPTION A. Using cloud init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-b-using-extensions" class="md-nav__link">
    OPTION B. Using Extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-create" class="md-nav__link">
    Review + create
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-new-keypair" class="md-nav__link">
    Generate New Keypair
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-vm-creation-exercise" class="md-nav__link">
    Post VM Creation Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


  <h1>Lab 2.b - Create a Linux Virtual Machine</h1>

<blockquote>
<p>Note: This lab is part of a series of labs for Mastering the Virtual Machine Offers Workshop. You should finish this lab as well as prior ones before moving on to the next sections.</p>
</blockquote>
<!-- no toc -->
<ul>
<li><a href="#upload-post-deployment-script">Upload Post Deployment Script</a></li>
<li><a href="#create-a-virtual-machine">Create a Virtual Machine</a></li>
<li><a href="#basics">Basics</a></li>
<li><a href="#disks">Disks</a></li>
<li><a href="#networking">Networking</a></li>
<li><a href="#management">Management</a></li>
<li><a href="#advanced">Advanced</a></li>
<li><a href="#review--create">Review + create</a></li>
<li><a href="#generate-new-keypair">Generate New Keypair</a></li>
<li><a href="#post-vm-creation-exercise">Post VM Creation Exercise</a></li>
</ul>
<h2 id="upload-post-deployment-script">Upload Post Deployment Script<a class="headerlink" href="#upload-post-deployment-script" title="Permanent link">#</a></h2>
<ol>
<li>Clone the repository to access files in <strong>scripts</strong> folder</li>
<li>Navigate to the Homepage of <a href="https://portal.azure.com/#home">Azure Portal</a> </li>
<li>Use the Search bar to search for <strong>Storage Accounts</strong> and hit enter. Select the <strong>vmworkshopsayouruniquestring</strong> Storage account we created in the previous lab.</li>
<li>In the left pane, look for Data Storage and select <strong>Containers</strong></li>
<li>Click on <strong>+ Container</strong> to create a new container<ul>
<li>Enter <strong>script</strong> as the new container name</li>
<li>Select <strong>Blob</strong> for Public access level</li>
<li>Click <strong>Create</strong> at the bottom of the page</li>
</ul>
</li>
<li>Open the new container, select <strong>Upload</strong> and upload the cloned script named <strong>custom_extension_linux.sh</strong> </li>
<li>If you open this script in VS Code or Notepad, you will see that it is running commands to install a web server and update the Virtual machine</li>
</ol>
<h2 id="create-a-virtual-machine">Create a Virtual Machine<a class="headerlink" href="#create-a-virtual-machine" title="Permanent link">#</a></h2>
<ol>
<li>Navigate to the Homepage of <a href="https://portal.azure.com/#home">Azure Portal</a></li>
<li>Click on the <strong>+ Create a resource</strong> button underneath Azure services</li>
<li>Use the Search bar to search for <strong>Virtual Machine</strong> and hit enter. Select the Virtual Machine offered by Microsoft Azure Service and click on <strong>Create</strong></li>
</ol>
<p>At this point you will be taken to the Virtual Machine service with several blades for configuration.</p>
<p><br></p>
<h3 id="basics">Basics<a class="headerlink" href="#basics" title="Permanent link">#</a></h3>
<h4 id="project-details">Project Details<a class="headerlink" href="#project-details" title="Permanent link">#</a></h4>
<ol>
<li>Select the <strong>Subscription</strong> from the dropdown menu to select which subscription will pay for the VM and other resource usage</li>
<li>
<p>To create a new Resource Group, click on <strong>Create New</strong> and name your resource group as <strong>vmworkshop-rg-YOUR_UNIQUE_STRING</strong>. Please make sure to follow the same convention for ease of access and understanding. </p>
<blockquote>
<p>Note that all the resources we create for the labs will reside within this new resource group</p>
</blockquote>
</li>
</ol>
<h4 id="instance-details">Instance Details<a class="headerlink" href="#instance-details" title="Permanent link">#</a></h4>
<ol>
<li>Name your Virtual Machine <strong>vmworkshop-YOUR_UNIQUE_STRING</strong></li>
<li>Select the Region you are in from the dropdown menu</li>
<li>Under Availability options, select <strong>No infrastructure redundancy required</strong></li>
<li>Select <strong>Standard</strong> Security type</li>
<li>For Image, click on See all images and select <strong>Ubuntu Server 20.04 LTS - Gen2</strong>. Configure the generation from the <strong>Configure VM Generation</strong> link below if necessary.</li>
<li>For size, click on See all sizes and select <strong>Standard_B2ms</strong>. This is sufficient to run this lab and will cost around $60/month, but regardless we will stop this virtual machine as soon as we generalize and capture the VM, so usage should be very low.</li>
</ol>
<h4 id="administrator-account">Administrator Account<a class="headerlink" href="#administrator-account" title="Permanent link">#</a></h4>
<ol>
<li>Select <strong>SSH public key</strong> as authentication type</li>
<li>Enter the username of your choice</li>
<li>Select <strong>Generate a new key pair</strong> from the dropdown for SSH public key source</li>
<li>Eneter the name of your Key pair  </li>
</ol>
<h4 id="inbound-port-rules">Inbound Port Rules<a class="headerlink" href="#inbound-port-rules" title="Permanent link">#</a></h4>
<ol>
<li>Select the <strong>Allow selected ports</strong> radio button for Public inbound ports</li>
<li>For Select Inbound ports Select <strong>HTTP</strong> as well as <strong>SSH</strong></li>
<li>Leave the rest as is and Click <strong>Next : Disks &gt;</strong> </li>
</ol>
<p><br></p>
<h3 id="disks">Disks<a class="headerlink" href="#disks" title="Permanent link">#</a></h3>
<h4 id="disk-options">Disk Options<a class="headerlink" href="#disk-options" title="Permanent link">#</a></h4>
<ol>
<li>For OS Disk Type, select <strong>Standard HDD (locally-redundant storage)</strong></li>
</ol>
<p>Leave the rest of the fields as is on the page and click on <strong>Next : Networking &gt;</strong></p>
<p><br></p>
<h3 id="networking">Networking<a class="headerlink" href="#networking" title="Permanent link">#</a></h3>
<h4 id="network-interface">Network interface<a class="headerlink" href="#network-interface" title="Permanent link">#</a></h4>
<ol>
<li>For <strong>Virtual network, Subnet, Public IP</strong> keep the default values as is. This will create a new VM, Subnet and Public IP with the default variable names</li>
<li>Ensure Select inbound ports has <strong>HTTP</strong> and <strong>SSH</strong> checked</li>
</ol>
<p>Leave the rest as is and click on <strong>Next : Management &gt;</strong></p>
<p><br></p>
<h3 id="management">Management<a class="headerlink" href="#management" title="Permanent link">#</a></h3>
<p>Do not change anything in this section and simply click on <strong>Next : Advanced &gt;</strong></p>
<p><br></p>
<h3 id="advanced">Advanced<a class="headerlink" href="#advanced" title="Permanent link">#</a></h3>
<p>We may use the Advanced blade to customize the VM in two ways. Firstly using Custom Script Extensions and secondly using cloud init.
In this module we will demonstrate both, but you should choose to do only once since both paths will essentially do the same flow of changes.</p>
<h4 id="option-a-using-cloud-init">OPTION A. Using cloud init<a class="headerlink" href="#option-a-using-cloud-init" title="Permanent link">#</a></h4>
<ol>
<li>Navigate to the custom data and cloud init section</li>
<li>Copy the code from the custom_extension_linux.sh script in this repository and paste it as is</li>
</ol>
<p>(or)</p>
<h4 id="option-b-using-extensions">OPTION B. Using Extensions<a class="headerlink" href="#option-b-using-extensions" title="Permanent link">#</a></h4>
<ol>
<li>Click on <strong>Select an extension to install</strong></li>
<li>From the display card, select <strong>Custom Script For Linux</strong> and click on <strong>Next</strong></li>
<li>For Script file, browse for the <strong>vmworkshopsayouruniquestring</strong> storage account, select <strong>script</strong> and look for the <strong>custom_extension_linux.sh</strong> Block blob and select it. [If you dont see storage account, please make sure it is in the same region as the VM which is being created]</li>
<li>Under command, modify it to <strong>sh custom_extension_linux.sh</strong></li>
</ol>
<p><br></p>
<p>Select <strong>Review + create</strong> button at the bottom of the Advanced blade</p>
<p><br></p>
<h3 id="review-create">Review + create<a class="headerlink" href="#review-create" title="Permanent link">#</a></h3>
<ol>
<li>In this blade, you should ensure that you receive the <strong>Validation Passed</strong> message at the top. If for any reason you receive a <strong>Validation failed</strong> message, you should go back and review the fields in red.</li>
<li>Lastly take a look at the configurations you have selected and click <strong>Create</strong></li>
</ol>
<p><br></p>
<h3 id="generate-new-keypair">Generate New Keypair<a class="headerlink" href="#generate-new-keypair" title="Permanent link">#</a></h3>
<ol>
<li>A popup will show on the screen to indicate creation of a new Key pair</li>
<li>Select <strong>Download private key and create resource</strong> and save it</li>
</ol>
<p><br></p>
<h3 id="post-vm-creation-exercise">Post VM Creation Exercise<a class="headerlink" href="#post-vm-creation-exercise" title="Permanent link">#</a></h3>
<ol>
<li>At this point your deployment will start and show an <strong>in progress</strong> status. </li>
<li>Once the deployment is complete, select <strong>Go to resource</strong></li>
<li>Copy <strong>Public IP Address</strong> from the created VM and paste it into a browser of your choice. This will show a public facing IP on the internet with a custom Welcome screen. </li>
<li>Once you see the custom welcome screen, you know that the post deployment script has done its job. </li>
</ol>
<p><br></p>
<p><strong>Congratulations!</strong> You have now finished this lab.</p>
<p>If you are in a live class setting, please raise your hand (even if virtually) to indicate you are done with the lab.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections"], "search": "../../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>